# –ü—Ä–æ–µ–∫—Ç: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ AI-–∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —É–º–Ω–æ–≥–æ –¥–æ–º–∞ –Ω–∞ –±–∞–∑–µ Home Assistant

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã AI-–∞–≥–µ–Ω—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö ChatGPT (—á–µ—Ä–µ–∑ OpenAI API) –∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–æ–º, –ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏, –æ–±—É—á–µ–Ω–∏–µ–º –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º —Å Jira –∏ –¥—Ä—É–≥–∏–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏. –û—Å–Ω–æ–≤–Ω–æ–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç ‚Äî –Ω–µ Home Assistant, –∞ –Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ –Ω–∏–º –≤ –≤–∏–¥–µ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å LangChain-–∞–≥–µ–Ω—Ç–∞–º–∏.

---

## üß± –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### üíª –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ                         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                  | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ   | ID –≤ HA (–µ—Å–ª–∏ –µ—Å—Ç—å)                  |
|-----------------------------------|-----------------------------|---------------|--------------------------------------|
| Raspberry Pi 4 Model B (8Gb)      | –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —É–∑–µ–ª| LAN (Ethernet)| -                                    |
| USB Web-–∫–∞–º–µ—Ä–∞ A4Tech PK-720MJ    | –ú–∏–∫—Ä–æ—Ñ–æ–Ω –∏ –∫–∞–º–µ—Ä–∞           | USB           | -                                    |
| –í–Ω–µ—à–Ω–∏–µ –¥–∏–Ω–∞–º–∏–∫–∏                  | –ê—É–¥–∏–æ–≤—ã—Ö–æ–¥                  | 3.5mm Jack    | -                                    |
| –ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –ª–∞–º–ø–∞ (ESP32)          | –£–ø—Ä–∞–≤–ª—è–µ–º–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ       | WiFi          | `switch.sonoff_10002ed516`           |
| Google Home Hub                   | –ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞ + UI            | WiFi          | `media_player.my_room_hub`          |
| Yeelight Ceiling                  | –û—Å–Ω–æ–≤–Ω–æ–π —Å–≤–µ—Ç + —Å—Ü–µ–Ω–∞—Ä–∏–∏    | WiFi          | `light.yeelight_ceiling_nightlight` |
| –¢–µ–ª–µ–≤–∏–∑–æ—Ä                         | AirPlay/–º–µ–¥–∏–∞               | LAN           | `media_player.airplay_myroomtv`     |
| –î–∞—Ç—á–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏                  | –°–µ–Ω—Å–æ—Ä                      | ZigBee/WiFi   | `sensor.humidity_158d00022c656c`    |
| –î–∞—Ç—á–∏–∫ –¥–∞–≤–ª–µ–Ω–∏—è                   | –°–µ–Ω—Å–æ—Ä                      | ZigBee/WiFi   | `sensor.pressure_158d00022c656c`    |
| –î–∞—Ç—á–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã                | –°–µ–Ω—Å–æ—Ä                      | ZigBee/WiFi   | `sensor.temperature_158d00022c656c` |
| –í—ã–∫–ª—é—á–∞—Ç–µ–ª–∏ –∫–æ—Ä–∏–¥–æ—Ä–∞              | –û—Å–≤–µ—â–µ–Ω–∏–µ                   | ZigBee/WiFi   | `switch.light_hallway`, `switch.light_coridor` |

---

## ‚öôÔ∏è –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–µ –ü–û –Ω–∞ Raspberry Pi

- Raspberry Pi OS Lite (64-bit)
- Docker
- Home Assistant OS (Core 2025.4.4 / Supervisor 2025.04.1)

### –û–±–ª–∞—á–Ω—ã–µ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

- ChatGPT Plus (OpenAI API)
- Jira (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- Netflix (–¥–ª—è –º—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)

---

## üåê –°–µ—Ç—å –∏ –¥–æ—Å—Ç—É–ø

| –ù–∞–∑–≤–∞–Ω–∏–µ                   | –ê–¥—Ä–µ—Å                                 |
|----------------------------|----------------------------------------|
| –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å HA     | `https://homeassistant.local:8123/`   |
| –í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø             | `https://ha.aihome.buzz/`             |
| SSH-–¥–æ—Å—Ç—É–ø –∫ Pi            | `ssh user@192.168.31.81` (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π IP, –∑–∞–∫—Ä–µ–ø–ª—ë–Ω –ø–æ MAC-–∞–¥—Ä–µ—Å—É) |

---

## üì° –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ò—Å—Ç–æ—á–Ω–∏–∫ ‚Üí –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ       | –¶–µ–ª—å                                | –ú–µ—Ö–∞–Ω–∏–∑–º             |
|-----------------------------|--------------------------------------|----------------------|
| `Mic` ‚Üí `Whisper`           | –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –≤ —Ç–µ–∫—Å—Ç          | PulseAudio + STT     |
| `openWakeWord` ‚Üí `Assist`   | –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É        | –ª–æ–∫–∞–ª—å–Ω–æ             |
| `Assist` ‚Üí `ChatGPT Agent`  | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥                     | OpenAI API           |
| `Agent` ‚Üí `HA API`          | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏              | REST API / WebSocket |
| `Camera` ‚Üí `Vision Agent`   | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤/–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞     | RTSP / HTTP          |
| `Agent` ‚Üí `TTS`             | –û–∑–≤—É—á–∫–∞ –æ—Ç–≤–µ—Ç–∞                       | HTTP / gRPC          |
| `TTS` ‚Üí `Speaker Service`   | –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–µ—á–∏                 | MQTT / REST          |
| `Agent` ‚Üí `Face Display`    | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è/—ç–º–æ—Ü–∏–π         | MQTT / REST          |
| `Agent` ‚Üí `Actuator Control`| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–º–æ—Ç–æ—Ä–∞–º–∏ –∏ LED-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ | MQTT / REST  |  

---

## üìä –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

1. MVP: –∞–≥–µ–Ω—Ç, –≤–∫–ª—é—á–∞—é—â–∏–π –ª–∞–º–ø—É –ø–æ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–º–∞–Ω–¥–µ.
2. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–∞–º–µ—Ä—ã (—Å–∏–¥–∏—Ç/—É—à—ë–ª/—Å–ø–∏—Ç).
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jira.
4. –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: –¥–∏–∞–ª–æ–≥–∏, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –æ–±—É—á–µ–Ω–∏–µ.
5. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–∞—Å–ø–æ—Ä—è–¥–∫–∞ –¥–Ω—è.

---

## üß© –°–µ—Ä–≤–∏—Å –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (`db-service`)

–°–µ—Ä–≤–∏—Å `db-service` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ –≤ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π (Redis), —Ç–∞–∫ –∏ –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π (MongoDB) –ø–∞–º—è—Ç–∏. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏ –∏ —à–ª—é–∑–∞–º–∏ –¥–ª—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º.

### üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è       | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                  | –ë–∞–∑–∞           |
|----------------|----------------------------------------------|----------------|
| –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è   | –ö—ç—à –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è       | Redis          |
| –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è    | –ò—Å—Ç–æ—Ä–∏—è, –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã, ID-–¥–∞–Ω–Ω—ã–µ               | MongoDB        |

### üßπ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
db-service/
‚îú‚îÄ‚îÄ app.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ clients/
‚îÇ   ‚îú‚îÄ‚îÄ redis_client.py         # –ö–ª–∞—Å—Å —Ä–∞–±–æ—Ç—ã —Å Redis
‚îÇ   ‚îî‚îÄ‚îÄ mongo_client.py         # –ö–ª–∞—Å—Å —Ä–∞–±–æ—Ç—ã —Å MongoDB
‚îú‚îÄ‚îÄ interfaces/
‚îÇ   ‚îî‚îÄ‚îÄ context_storage.py      # –û–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–∞ –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É
‚îî‚îÄ‚îÄ models/
    ‚îî‚îÄ‚îÄ context.py              # Pydantic-–º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, FileInfo, SessionState)
```

### üîå API (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

| –ú–µ—Ç–æ–¥       | –ü—É—Ç—å                        | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|-------------|-----------------------------|-----------------------------------------------|
| `POST`      | `/context/save`             | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π JSON –≤ MongoDB         |
| `POST`      | `/context/cache`            | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Redis |
| `GET`       | `/context/load/{session}`   | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ `session_id`           |

### üìö –ü—Ä–∏–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π

```python
# models/context.py

class FileInfo(BaseModel):
    file_id: str
    filename: str
    device_id: str
    user_id: str
    uploaded_at: datetime
    file_type: str  # image, audio, video, etc.
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ai-agents-home/
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ docker-compose.yaml
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ langchain_config.yaml
‚îÇ   ‚îú‚îÄ‚îÄ devices.yaml
‚îÇ   ‚îî‚îÄ‚îÄ mqtt/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ mqtt/
‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îî‚îÄ‚îÄ mongo/
‚îú‚îÄ‚îÄ log/
‚îÇ   ‚îî‚îÄ‚îÄ mqtt/
‚îú‚îÄ‚îÄ ai-agent-core/
‚îÇ   ‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ skills/
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ whisper/
‚îÇ   ‚îú‚îÄ‚îÄ tts/
‚îÇ   ‚îî‚îÄ‚îÄ vision/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ audio-stream-gateway/
‚îÇ   ‚îú‚îÄ‚îÄ stt-service/
‚îÇ   ‚îú‚îÄ‚îÄ vision-agent/
‚îÇ   ‚îú‚îÄ‚îÄ tts-service/
‚îÇ   ‚îú‚îÄ‚îÄ speaker-service/
‚îÇ   ‚îú‚îÄ‚îÄ face-display/
‚îÇ   ‚îú‚îÄ‚îÄ actuator-control/
‚îÇ   ‚îî‚îÄ‚îÄ db-service/
```

---

## üìö –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ HA-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —É–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OpenAI API –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- –í –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ `device_id`
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω—ã (–¥–æ 10 —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç ESP32 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ MQTT
